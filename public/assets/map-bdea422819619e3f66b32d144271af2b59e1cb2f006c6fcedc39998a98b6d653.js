function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:42.366719,lng:-71.258604},zoom:16,icon:brandeis_logo}),createSidebar(json_array),map.data.addGeoJson(test),map.data.setStyle(function(){var e="blue";return{fillColor:e,strokeColor:e,strokeWeight:2}}),map.data.addListener("mouseover",function(e){map.data.revertStyle(),map.data.overrideStyle(e.feature,{strokeWeight:8})}),map.data.addListener("mouseout",function(){map.data.revertStyle()})}function createSidebar(e){initialized=!0,_.each(e,function(e){var n=$("<div class='pointer'>"+e.name+"</div>");n.appendTo("#sidebar_container"),n.on("click",function(){createForSideBar(e)})})}function createForSideBar(e){controlMarkers(markers,ifKeep),null==ifKeep&&(markers=[]);var n=create(e);n.setMap(map),map.panTo({lat:e.lat,lng:e.lng}),markers.push(n)}function controlMarkers(e,n){for(var a=0;a<e.length;a++)e[a].setMap(n)}function create(e){var n=new google.maps.InfoWindow({content:e.infowindow}),a={lat:e.lat,lng:e.lng},t=new google.maps.Marker({position:a,animation:google.maps.Animation.DROP,map:map});return t.addListener("click",function(){n.open(map,t)}),t}function create_interest_marker(e){for(var n=0;n<e.length;n++){var a=new google.maps.InfoWindow({content:e[n].infowindow}),t={lat:e[n].lat,lng:e[n].lng},o=donut;"Starbucks"===e[n].name?o=starbucks:"Einstein Bros Bagels"===e[n].name&&(o=einstein);var r=new google.maps.Marker({position:t,map:map,icon:o});r.addListener("click",function(){a.open(map,r)}),interest_markers.push(r)}firstTime=!1}function show(e){firstTime&&create_interest_marker(e),controlMarkers(interest_markers,map);for(var n=0;n<interest_markers.length;n++){var a=interest_markers[n];a.setAnimation(google.maps.Animation.BOUNCE),stopAnimation(a)}map.panTo({lat:42.366719,lng:-71.258604})}function stopAnimation(e){setTimeout(function(){e.setAnimation(null)},1420)}function hide(){controlMarkers(interest_markers,null)}function keepMarkers(e){e.checked?ifKeep=map:(ifKeep=null,controlMarkers(markers,ifKeep),markers=[])}function interestMarkersBox(e){e.checked?show(places_of_interest):hide(places_of_interest)}var json_array=[{lat:42.364018,lng:-71.260718,name:"Ridgewood",infowindow:"Here is Ridgewood Quad."},{lat:42.36961,lng:-71.255711,name:"North",infowindow:"Here is North Quad."},{lat:42.367565,lng:-71.255646,name:"Castle",infowindow:"Here is a beautiful Castle."}],places_of_interest=[{lat:42.366327,lng:-71.258744,name:"Dunkin' Donuts",infowindow:"food info and shop info"},{lat:42.367854,lng:-71.258671,name:"Starbucks",infowindow:"Starbucks in Farber Library"},{lat:42.36573,lng:-71.260188,name:"Einstein Bros Bagels",infowindow:"Selling bagels and softdrinks here"},{lat:42.368043,lng:-71.256617,name:"Usdan Dinning Hall",infowindow:"Lower Usdan Dinning hall"},{lat:42.366412,lng:-71.260546,name:"Sherman Dinning Hall",infowindow:"Student dinning hall"}],markers=[],brandeis_logo="/assets/brandeis_logo.png",starbucks="/assets/s_logo.png",donut="/assets/d_logo.png",einstein="/assets/e_logo.png",map,test={type:"FeatureCollection",features:[{type:"Feature",properties:{color:"blue"},geometry:{type:"Polygon",coordinates:[[[-71.260632,42.364164],[-71.260732,42.364025],[-71.260328,42.363883],[-71.260309,42.364038],[-71.260632,42.364164]]]}}]},ifKeep=null,kids;$("#search").on("input",function(){kids=$("#sidebar_container div");for(var e=$("#search").val().toLowerCase(),n=0;n<kids.length;n++){var a=-1!=kids[n].textContent.toLowerCase().indexOf(e);kids[n].style.display=a?"block":"none"}}),$("body > #sidebar_container").remove();var interest_markers=[],firstTime=!0;